{% load static %}

{% include 'base.html' %}

{% block content%}
<div class="container">
    <div class="row" id="video-details">
    </div>
</div>

<script>
    $(document).ready(function(){
        let currentURL = window.location.href;
        let videoID = currentURL.substring(currentURL.lastIndexOf('/') + 1);        
        let videoDetailsURL = 'http://127.0.0.1:8000/video-api/' + videoID;

        $.ajax({
            url: videoDetailsURL,
            type: 'GET',
            success: function(data) {
                let div_content = '';

                div_content += '<div>'
                    div_content += '<iframe width="100%" height="100%" src="' + data.data['embed_link'] + '">'
                div_content += '</iframe>'
                div_content += '<div class="card">'
                div_content += '<div class="card-footer">View: <b>0</b> Like: <b>0</b> Dislike: <b>0</b></div>'
                div_content += '</div>'
                div_content += '</div>'
    
                document.getElementById("video-details").innerHTML = div_content;
            }
        });
    });
</script>
{% endblock %}